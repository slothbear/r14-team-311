"use strict";angular.module("frontendApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","ui.router","restangular"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("dashboard",{url:"/",templateUrl:"views/dashboard.html",controller:"DashboardCtrl"})}]).config(["RestangularProvider",function(a){a.setBaseUrl("http://localhost:3000/"),a.setRestangularFields({id:"_id"}),a.setRequestInterceptor(function(a,b,c){"put"===b&&(a._id=void 0);var d;return("post"===b||"put"===b||"patch"===b)&&(d={},"s"===c[c.length-1]?d[c.substring(0,c.length-1)]=a:d=a),d}),a.setResponseExtractor(function(a,b){var c;return"getList"===b?(c=a.data,a.metadata&&(c.metadata=a.metadata)):c=a,c})}]),angular.module("frontendApp").controller("MainCtrl",["$scope","$modal","$cookies",function(a,b,c){a.openAbout=function(){b.open({templateUrl:"views/about.html",controller:["$scope","$modalInstance",function(a,b){a.close=function(){b.dismiss("cancel")}}]})},"1"!==c.fr&&(a.openAbout(),c.fr="1")}]),angular.module("frontendApp").controller("StatsCtrl",["$scope","Restangular",function(a,b){function c(){return{assigned_issues:Math.round(20*Math.random()),closed_issues:Math.round(20*Math.random()),closed_pull_request:Math.round(20*Math.random()),commits:Math.round(20*Math.random()),opened_issues:Math.round(20*Math.random()),opened_pull_request:Math.round(20*Math.random()),opened_pull_requests:Math.round(20*Math.random()),points:Math.round(20*Math.random()),pushes:Math.round(20*Math.random()),collaborators:Math.round(20*Math.random())}}var d;a.cStat="points",a.stats=[],b.one("stats","monthly").getList().then(function(b){a.stats=b,a.current=a.stats[a.stats.length-1],d=a.stats[a.stats.length-2],a.stats.length<=1&&(d=c(),a.stats.unshift(d),a.stats.unshift(c()),a.stats.unshift(c()),a.stats.unshift(c()))}),a.extractData=function(b){for(var c=[],d=0;d<a.stats.length;d++){var e=a.stats[d];c.push(e[b]||0)}return c},a.getDelta=function(b){if(!a.current)return 0;var c=0;d&&(c=d[b]||0);var e=a.current[b]-c;return e=e>0?"+ "+e:"- "+Math.abs(e)};var e={assigned_issues:"assigned issues",closed_issues:"closed issues",closed_pull_request:"closed pull request",closed_pull_requests:"closed pull requests",commits:"commits",opened_issues:"opened issues",opened_pull_request:"opened pull request",opened_pull_requests:"opened pull requests",points:"points",pushes:"pushes",collaborators:"collaborators"};a.getLabel=function(a){return e[a]},a.changeCstat=function(b){a.cStat=b},a.isActive=function(b){return a.cStat===b}}]),angular.module("frontendApp").controller("RankingCtrl",["$scope","Restangular",function(a,b){b.all("users").getList().then(function(c){a.leader=c[0],b.one("user_stats",a.leader.login).getList("monthly").then(function(b){a.leaderStats=b[b.length-1]}),c.length>1&&(a.rest=c.slice(1,c.length))})}]),angular.module("frontendApp").controller("LiveStreamCtrl",["$scope","$timeout","Restangular",function(a,b,c){var d=0,e={};c.one("achievements","types").getList().then(function(a){for(var b=0;b<a.length;b++){var c=a[b];e[c.id]=c.name}}),a.getAchievementName=function(a){return e[a]},function f(){c.all("events").getList({timestamp:d}).then(function(c){for(var e=0;e<c.length;e++){var g=c[e];if(g.created_at=moment(g.created_at),"push"===g.type){g.isCollapsed=!0;for(var h=[],i=[],j=0;j<g.data.commits.length;j++){var k=g.data.commits[j];k.timestamp=moment(k.timestamp),2>j?i.push(k):h.push(k)}g.data.more_commits=h,g.data.head_commits=i}a.events&&a.events.unshift(g)}d||(d=c[0].created_at.unix()),a.events||(a.events=c),b(f,1e4)})}()}]),angular.module("frontendApp").directive("sparkline",function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.sparkline,function(c){a.statsData=c,b.sparkline(a.statsData,d)},!0);var d=b.data();d.type=d.type||"bar",d.disableHiddenCheck=!0,d.resize&&$(window).resize(function(){b.sparkline(a.statsData,d)})}}}),angular.module("frontendApp").controller("DashboardCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);